Тема и базовые переменные
:root
    • --bg: #f6f8fc
    • --panel: #ffffff
    • --panel2: #f3f6fb
    • --text: #111827
    • --muted: #5b677a
    • --border: rgba(17,24,39,.10)
    • --border2: rgba(17,24,39,.14)
    • --shadow: 0 16px 40px rgba(17,24,39,.12)
    • --radius: 14px
    • --rowH: 34px
body
    • font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial
    • background: radial-gradient(1200px 700px at 20% 0%, #ffffff 0%, var(--bg) 60%) fixed
    • color: var(--text)
    • height: 100vh, overflow: hidden, margin: 0

Глобальная раскладка
.app
    • display: flex
    • width: 100vw, height: 100vh

Sidebar
.sidebar
    • width: 340px, min-width: 280px, max-width: 520px
    • display: flex; flex-direction: column
    • border-right: 1px solid var(--border)
    • background: rgba(255,255,255,.92)
    • backdrop-filter: blur(10px)
Верхняя зона (sticky)
.sb-top
    • padding: 12px 12px 10px
    • border-bottom: 1px solid var(--border)
    • position: sticky; top: 0; z-index: 5
    • background: rgba(255,255,255,.98)
Top-block (единый блок с заголовком/поиском/кнопками + tabs)
.top-block
    • background: rgba(255,255,255,.98)
    • border-radius: 14px
    • padding: 10px 10px 0
    • box-shadow: none
    • overflow: hidden
    • margin-bottom: 10px
.sb-title
    • display: flex; align-items: center; justify-content: space-between
    • gap: 10px
    • margin-bottom: 10px
.sb-title h1
    • margin: 0
    • font-size: 13px
    • font-weight: 750
    • letter-spacing: .2px
Поиск
.top-search
    • display: flex
.top-search input
    • width: min(240px, 100%)
    • padding: 8px 10px
    • font-size: 12px
    • color: var(--text)
    • background: rgba(17,24,39,.03)
    • border: 1px solid rgba(17,24,39,.14)
    • border-radius: 12px
    • outline: none

Кнопки в Sidebar (строка действий)
.sb-actions
    • display: flex; align-items: center
    • gap: 8px
    • margin-bottom: 10px
    • flex-wrap: wrap
    • justify-content: flex-start
.spacer
    • flex: 1 1 auto (раздвигает элементы)
Базовая кнопка
.btn
    • height: 32px, min-width: 32px
    • padding: 7px 9px
    • border: 1px solid var(--border)
    • border-radius: 10px
    • background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04))
    • color: var(--text)
    • font-size: 12px, font-weight: 700
    • box-shadow: 0 10px 18px rgba(0,0,0,.18)
    • cursor: pointer; user-select: none
.btn:hover → filter: brightness(1.05)
.btn:active → transform: translateY(1px)
Add (“+”)
.btn.add
    • width: 32px
    • padding: 0
    • border-radius: 999px
    • font-size: 16px
    • line-height: 32px
    • text-align: center
button#btnAddRoot.btn.add
    • box-shadow: 0 4px 8px rgba(0,0,0,.18) (override)
Ghost / Icon
.btn.ghost
    • background: rgba(17,24,39,.03)
    • box-shadow: none
.btn.icon
    • width: 32px
    • padding: 0
    • border-radius: 12px
    • font-size: 14px
    • line-height: 32px
    • text-align: center
.btn.danger
    • border-color: rgba(220,38,38,.22)
#btnDelete
    • border: none !important
Export HTML (</>)
#btnExportHtml
    • border: 0
    • background: transparent
    • padding: 4px 6px
    • border-radius: 8px
    • font-size: 12px
    • line-height: 1
    • color: rgba(17,24,39,.85)
    • cursor: pointer
#btnExportHtml:hover → background: rgba(0,0,0,.05)
#btnExportHtml:active → transform: translateY(0.5px)
Checkbox “Select all”
.chkAll
    • display: inline-flex; align-items: center; justify-content: center
    • width: 26px; height: 26px
    • border-radius: 10px
    • cursor: pointer; user-select: none
.chkAll input
    • position: absolute; opacity: 0; pointer-events: none
.chkAll span (видимый чекбокс)
    • width: 16px; height: 16px
    • border-radius: 6px
    • border: 1px solid rgba(17,24,39,.20)
    • background: rgba(255,255,255,.9)
    • box-shadow: 0 1px 2px rgba(17,24,39,.08)
    • display: inline-block; position: relative
.chkAll:hover span
    • border-color: rgba(17,24,39,.30)
.chkAll input:checked + span
    • background: #e9eef8
    • border-color: rgba(17,24,39,.28)
.chkAll input:checked + span::after (галочка)
    • left: 4px; top: 1px
    • width: 5px; height: 9px
    • border: 2px solid rgba(17,24,39,.85)
    • border-top: none; border-left: none
    • transform: rotate(45deg)

Tabs (Chrome-like)
.tabs
    • display: flex; align-items: flex-end
    • gap: 0
    • padding: 0 1px 0
    • background: transparent
    • overflow: auto
    • scrollbar-width: thin
.top-block .tabs
    • padding: 0 0 0 (без левого отступа)
Tab
.tab
    • position: relative
    • height: 26px
    • min-width: 72px; max-width: 180px
    • padding: 0 12px
    • margin: 0 0 0 -8px (перекрытие “как Chrome”)
    • border: 1px solid rgba(17,24,39,.16)
    • border-bottom: none
    • background: var(--panel2)
    • color: var(--text)
    • font-size: 13px
    • line-height: 26px
    • white-space: nowrap; overflow: hidden; text-overflow: ellipsis
    • cursor: pointer; user-select: none
    • border-top-left-radius: 12px; border-top-right-radius: 12px
    • z-index: 1
    • box-shadow: 0 -1px 0 rgba(255,255,255,.75) inset
Псевдо-элементы (формируют “плавные уши”):
.tab::before, .tab::after
    • content: ""
    • position: absolute
    • top: -1px
    • width: 12px; height: 27px
    • background: inherit
    • border: 1px solid rgba(17,24,39,.16)
    • border-bottom: none
    • z-index: -1
.tab::before
    • left: -7px
    • border-top-left-radius: 12px
    • border-right: none
    • transform: skewX(-18deg)
.tab::after
    • right: -7px
    • border-top-right-radius: 12px
    • border-left: none
    • transform: skewX(18deg)
Активный tab:
.tab.active
    • background: var(--panel)
    • border-color: rgba(17,24,39,.18)
    • z-index: 3
.tab.active::before, .tab.active::after
    • border-color: rgba(17,24,39,.18)
Закрытие tab:
.tab .close
    • position: absolute; right: 6px; top: 4px
    • width: 18px; height: 20px
    • border-radius: 999px
    • border: 1px solid rgba(17,24,39,.16)
    • background: var(--panel)
    • font-size: 14px; line-height: 16px
    • display: none (по умолчанию)
    • align-items: center; justify-content: center
    • cursor: pointer; z-index: 4
Режим редактирования:
.tab.editing → padding-right: 28px
.tab.editing .label → display: none
.tab.editing .close → display: inline-flex
.tab input.rename
    • width: 100%; height: 20px; margin-top: 2px
    • border: 1px solid rgba(17,24,39,.18)
    • border-radius: 8px
    • padding: 0 8px
    • font-size: 12px; font-weight: 750
    • background: var(--panel); color: var(--text)
    • outline: none
Tab “+”:
.tab.plus
    • width/min/max-width: 26px
    • margin-left: -3px
    • border-radius: 999px
    • background: transparent
    • border: none; box-shadow: none
    • line-height: 24px
    • text-align: center
    • font-size: 16px
    • overflow: visible; text-overflow: clip
    • z-index: 6
.tab.plus::before, .tab.plus::after → display: none

Дерево заметок
.tree
    • padding: 8px 3px 10px
    • height: 100%
    • overflow: auto
    • display: flex; flex-direction: column
    • gap: 0 !important
.node
    • display: flex; flex-direction: column
    • gap: 0px
    • width: 100%
Заголовок даты
.datehdr
    • margin: 0
    • font-size: 12px
    • font-weight: 800
    • color: var(--text)
    • opacity: .85
    • padding: 10px 8px 6px
    • user-select: none
Строка заметки
.row
    • height: var(--rowH) (= 34px)
    • display: flex; align-items: center
    • gap: 6px
    • padding: 0 8px
    • background: rgba(255,255,255,.92)
    • box-shadow: none
    • cursor: default
    • user-select: none
    • touch-action: none
    • position: relative
    • border-top: 1px solid rgba(17,24,39,.10)
    • border-bottom: 1px solid rgba(17,24,39,.10)
    • width: 100%
    • box-sizing: border-box
.row:hover → filter: brightness(1.04)
.row.selected → background: rgba(59,130,246,.06)
.row.multi → background: rgba(37,99,235,.06)
Кнопка “+” (дочерняя заметка):
.childplus
    • width: 22px; height: 27px
    • padding: 0
    • border-radius: 8px
    • border: none
    • background: transparent
    • color: var(--text)
    • font-size: 14px
    • font-weight: 800
    • line-height: 20px
    • cursor: pointer
    • flex: 0 0 auto
.childplus:hover → background: transparent
Контейнер дочерних заметок
.children
    • margin-left: 14px
    • padding-left: 10px
    • border-left: 1px dashed rgba(255,255,255,.12)
    • display: flex; flex-direction: column
    • gap: 0px
“0 gap” (схлопывание двойных линий)
    • Между соседними корневыми: .tree > .node + .node > .row { border-top: 0 !important; }
    • Между соседними дочерними: .children > .node + .node > .row { border-top: 0 !important; }
    • Первая заметка после заголовка даты принудительно возвращает top-border:
        ◦ .tree > .node > .datehdr + .node > .row { border-top: 1px solid rgba(17,24,39,.10) !important; }

Main (правое окно)
.main
    • flex: 1 1 auto
    • display: flex; flex-direction: column
    • background: rgba(246,248,252,1)
Верхняя панель main
.main-top
    • padding: 14px 16px 12px
    • border-bottom: 1px solid var(--border)
    • background: rgba(255,255,255,.86)
    • backdrop-filter: blur(10px)
    • display: flex; align-items: center; justify-content: space-between
    • gap: 12px
.crumbs
    • display: flex; flex-direction: column
    • gap: 2px
    • min-width: 0
.crumbs .path
    • font-size: 12px
    • color: var(--muted)
    • white-space: nowrap; overflow: hidden; text-overflow: ellipsis
.crumbs .headline
    • font-size: 14px
    • font-weight: 780
    • white-space: nowrap; overflow: hidden; text-overflow: ellipsis
.main-actions
    • display: flex; align-items: center
    • gap: 8px
    • flex: 0 0 auto
.main-actions .btn
    • width: 32px
    • padding: 0
    • border-radius: 12px
    • line-height: 32px
    • text-align: center
    • font-size: 14px
Редактор
.editor-wrap
    • padding: 14px 16px 18px
    • overflow: auto
    • height: 100%
.editor (textarea)
    • width: 100%
    • min-height: 60vh
    • padding: 12px
    • font-size: 13px
    • line-height: 1.35rem
    • color: var(--text)
    • background: rgba(17,24,39,.03)
    • border: 1px solid rgba(17,24,39,.12)
    • border-radius: 12px
    • outline: none
    • resize: vertical
.editor:focus
    • border-color: rgba(255,255,255,.18)

Разделитель (resize)
.resizer
    • width: 6px
    • background: rgba(17,24,39,.03)
.resizer:hover
    • background: rgba(255,255,255,.06)

Drag-превью (визуальные “ghost” элементы)
.dragging-original
    • opacity: .25 (оригинал при перетаскивании)
.drag-ghost
    • position: fixed; left: 0; top: 0
    • width: 320px
    • transform: translate(-9999px,-9999px) (скрыт до позиционирования)
    • pointer-events: none
    • opacity: .90
    • z-index: 9999
.text-drag-ghost (перетаскивание текста)
    • position: fixed; left: 0; top: 0
    • transform: translate(-9999px,-9999px)
    • pointer-events: none
    • z-index: 10000
    • font-size: 12px; font-weight: 700
    • color: var(--text)
    • background: rgba(255,255,255,.92)
    • border: 1px solid rgba(17,24,39,.14)
    • border-radius: 999px
    • padding: 8px 10px
    • box-shadow: 0 16px 40px rgba(17,24,39,.18)
    • max-width: 420px
    • white-space: nowrap; overflow: hidden; text-overflow: ellipsis

